function LifeForm(){this.isAlive=!1,this.isAliveNextGen=!1,this.numberOfLivingNeighbors=0,this.timeOfDeath=0}function Universe(i,t){this.width=i,this.height=t,this.grid=[];for(var e=0;i>e;e++){this.grid[e]=[];for(var n=0;t>n;n++)this.grid[e][n]=new LifeForm}}LifeForm.prototype.kill=function(){this.isAlive&!(this.isAlive=!1)&&(this.timeOfDeath=Date.now())},LifeForm.prototype.resuscitate=function(){this.isAlive=!0},LifeForm.prototype.addLivingNeighbor=function(){this.numberOfLivingNeighbors++},LifeForm.prototype.evolve=function(){this.isAlive&!(this.isAlive=this.isAliveNextGen)&&(this.timeOfDeath=Date.now())},LifeForm.prototype.resetNeighborCount=function(){this.numberOfLivingNeighbors=0},LifeForm.prototype.calculateStateNextGen=function(){this.numberOfLivingNeighbors<2||this.numberOfLivingNeighbors>3?this.isAliveNextGen=!1:3===this.numberOfLivingNeighbors?this.isAliveNextGen=!0:this.isAliveNextGen=this.isAlive},Universe.prototype.getActualLocation=function(i,t){var e=i,n=t;return 0>e?e=this.width-1:e>=this.width&&(e=0),0>n?n=this.width-1:n>=this.width&&(n=0),{x:e,y:n}},Universe.prototype.countLivingNeighborsAt=function(i,t){this.grid[i][t].resetNeighborCount();var e=null;e=this.getActualLocation(i-1,t-1),this.grid[e.x][e.y].isAlive&&this.grid[i][t].addLivingNeighbor(),e=this.getActualLocation(i,t-1),this.grid[e.x][e.y].isAlive&&this.grid[i][t].addLivingNeighbor(),e=this.getActualLocation(i+1,t-1),this.grid[e.x][e.y].isAlive&&this.grid[i][t].addLivingNeighbor(),e=this.getActualLocation(i-1,t),this.grid[e.x][e.y].isAlive&&this.grid[i][t].addLivingNeighbor(),e=this.getActualLocation(i+1,t),this.grid[e.x][e.y].isAlive&&this.grid[i][t].addLivingNeighbor(),e=this.getActualLocation(i-1,t+1),this.grid[e.x][e.y].isAlive&&this.grid[i][t].addLivingNeighbor(),e=this.getActualLocation(i,t+1),this.grid[e.x][e.y].isAlive&&this.grid[i][t].addLivingNeighbor(),e=this.getActualLocation(i+1,t+1),this.grid[e.x][e.y].isAlive&&this.grid[i][t].addLivingNeighbor()},Universe.prototype.calculateNextGenState=function(){for(var i=0;i<this.width;i++)for(var t=0;t<this.height;t++){var e=this.countLivingNeighborsAt(i,t);this.grid[i][t].calculateStateNextGen()}},Universe.prototype.evolve=function(){for(var i=0;i<this.width;i++)for(var t=0;t<this.height;t++)this.grid[i][t].evolve()};var Conway=function(){var i=1e3,t=null,e=new Universe(80,80),n,o,r,s,a,h=800,l=800,u=80,v=80,g=function(){o.fillStyle="white",o.fillRect(0,0,l,h);for(var i=Date.now(),t=0;u>t;t++)for(var n=0;v>n;n++){var r=e.grid[t][n];if(r.isAlive)o.fillStyle="black",o.fillRect(10*t,10*n,10,10);else{var s=i-r.timeOfDeath;if(5e3>s){var a=c(s);o.fillStyle="rgba(0,0,0,"+a+")",o.fillRect(10*t,10*n,10,10)}}}},c=function(i){return.2-4e-5*i},f=function(){g(),window.requestAnimationFrame(f)},d=function(){n=document.getElementById("canvas"),o=n.getContext("2d"),iterationSlider=document.getElementById("iteration-slider"),iterationLabel=document.getElementById("iteration-label"),a=document.getElementById("play-pause"),a.onclick=S,iterationSlider.onchange=x,n.onclick=A,n.onmousedown=N,n.onmouseup=p,n.onmouseleave=p,f()},m=function(i,t){e.grid[i][t].resuscitate()},y=function(i,t){e.grid[i][t].kill()},L=function(i,t){return{x:Math.floor(i/10),y:Math.floor(t/10)}},A=function(i){var t=L(i.offsetX,i.offsetY);i.altKey?y(t.x,t.y):m(t.x,t.y)},b=function(i){var t=L(i.offsetX,i.offsetY);i.altKey?y(t.x,t.y):m(t.x,t.y)},N=function(i){n.addEventListener("mousemove",b)},p=function(i){n.removeEventListener("mousemove",b)},x=function(t){var e=Number(iterationSlider.value);e=D(e);var n=C();O(),i=e,n&&G(),w()},w=function(){iterationLabel.textContent="Evolve every "+i/1e3+" seconds"},S=function(i){C()?(Conway.stop(),a.value="Play"):(Conway.start(),a.value="Pause")},F=function(){var n=Date.now();e.calculateNextGenState(),e.evolve(),g(),t=setTimeout(F,i-(Date.now()-n))},G=function(){F()},O=function(){clearTimeout(t),t=null},C=function(){return!!t},D=function(i){return i>=0?4*i*1e3+1e3:800*(i+1)+200},E=function(){return i},k=function(t){i=t};return{getSleepTime:E,setSleepTime:k,getTranslatedSleepTime:D,start:G,stop:O,isRunning:C,init:d,getFadeValue:c,getGridIndicesFromClickLocation:L}}();window.onload=function(){Conway.init()};
//# sourceMappingURL=./main-min.js.map